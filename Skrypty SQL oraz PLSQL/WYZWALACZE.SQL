--WYZWALACZ 1:
CREATE OR REPLACE TRIGGER LOGI_FAKTURA
AFTER UPDATE ON FAKTURA FOR EACH ROW
BEGIN
  CASE
  WHEN UPDATING THEN
    INSERT INTO FAKTURA_LOG(ID_LOG,DATA_ZMIANY,LOGIN_USER,OLD_NUMER,NEW_NUMER)
    VALUES(FAKTURA_LOG_SEQ.NEXTVAL,SYSDATE,USER,:OLD.NUMER,:NEW.NUMER);
  END CASE;
END;
/
--WYZWALACZ 2:
CREATE OR REPLACE TRIGGER LOGI_SAMOCHOD
AFTER UPDATE OR INSERT OR DELETE ON SAMOCHOD FOR EACH ROW
BEGIN
  CASE
  WHEN UPDATING THEN
    INSERT INTO SAMOCHOD_LOG
    VALUES(SAMOCHOD_LOG_SEQ.NEXTVAL,SYSDATE,USER,:OLD.MARKA,:NEW.MARKA,:OLD.MODEL,:NEW.MODEL,
    :OLD.ROCZNIK,:NEW.ROCZNIK,:OLD.NR_REJESTRACYJNY,:NEW.NR_REJESTRACYJNY,:OLD.POLISA,:NEW.POLISA);
  WHEN INSERTING THEN
    INSERT INTO SAMOCHOD_LOG(ID_LOG,DATA_ZMIANY,LOGIN_USER,NEW_MARKA,NEW_MODEL,NEW_ROCZNIK,NEW_NR_REJESTRACYJNY,NEW_POLISA)
    VALUES(SAMOCHOD_LOG_SEQ.NEXTVAL,SYSDATE,USER,:NEW.MARKA,:NEW.MODEL,:NEW.ROCZNIK,:NEW.NR_REJESTRACYJNY,:NEW.POLISA);
  WHEN DELETING THEN
    INSERT INTO SAMOCHOD_LOG(ID_LOG,DATA_ZMIANY,LOGIN_USER,OLD_MARKA,OLD_MODEL,OLD_ROCZNIK,OLD_NR_REJESTRACYJNY,OLD_POLISA)
    VALUES(SAMOCHOD_LOG_SEQ.NEXTVAL,SYSDATE,USER,:OLD.MARKA,:OLD.MODEL,:OLD.ROCZNIK,:OLD.NR_REJESTRACYJNY,:OLD.POLISA);
  END CASE;
END;
/
--WYZWALACZ 3:
CREATE OR REPLACE TRIGGER LOGI_KLIENT
AFTER UPDATE OR INSERT OR DELETE ON KLIENT FOR EACH ROW
BEGIN
  CASE
  WHEN UPDATING THEN
    INSERT INTO KLIENT_LOG
    VALUES(KLIENT_LOG_SEQ.NEXTVAL,SYSDATE,USER,:OLD.NAZWA,:NEW.NAZWA,:OLD.NIP,:NEW.NIP);
  WHEN INSERTING THEN
    INSERT INTO KLIENT_LOG(ID_LOG,DATA_ZMIANY,LOGIN_USER,NEW_NAZWA,NEW_NIP)
    VALUES(SAMOCHOD_LOG_SEQ.NEXTVAL,SYSDATE,USER,:NEW.NAZWA,:NEW.NIP);
  WHEN DELETING THEN
    INSERT INTO KLIENT_LOG(ID_LOG,DATA_ZMIANY,LOGIN_USER,OLD_NAZWA,OLD_NIP)
    VALUES(SAMOCHOD_LOG_SEQ.NEXTVAL,SYSDATE,USER,:OLD.NAZWA,:OLD.NIP);
  END CASE;
END;
/